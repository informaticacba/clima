<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <title>Cambio Climatico</title>

    <!-- Bootstrap core CSS -->
    <link href="css/bootstrap.css" rel="stylesheet">

	<!-- Font Awesome -->
	<link href="css/font-awesome.min.css" rel="stylesheet">

	<!-- Responsive Tabs Style -->
    <link type="text/css" rel="stylesheet" href="css/responsive-tabs.css" />
    <link type="text/css" rel="stylesheet" href="css/tabs_style.css" />
    <link href="css/c3.css" rel="stylesheet" type="text/css">    
	<link href="css/opiscatter.css" rel="stylesheet" type="text/css">

    <!-- Custom styles for this template -->
    <link href="css/main_style.css" rel="stylesheet">

    <!-- Leaflet -->
    <link rel="stylesheet" href="http://cdn.leafletjs.com/leaflet/v0.7.7/leaflet.css" />
    

    <style>
		#map {
			width: auto;
			height: 500px;
		}

		.info {
			padding: 6px 8px;
			font: 14px/16px Arial, Helvetica, sans-serif;
			background: white;
			background: rgba(255,255,255,0.8);
			box-shadow: 0 0 15px rgba(0,0,0,0.2);
			border-radius: 5px;
			color: #777;
			text-align: center;
		}
		.info h4 {
			margin: 0 0 5px;
			color: #777;
			text-align: center;
		}

		.legend {
			text-align: left;
			line-height: 18px;
			color: #555;
		}
		.legend i {
			width: 18px;
			height: 18px;
			float: left;
			margin-right: 8px;
			opacity: 0.7;
		}
	</style>
  </head>

  <body>

   	<!--div class="blog-masthead">
      <div class="container">
        <nav class="blog-nav">
          <a class="blog-nav-item" href="#"><i class="fa fa-tasks"></i> datos.gob.mx</a>
          <a class="blog-nav-item" href="#">Datos</a>
          <a class="blog-nav-item" href="#">Herramientas</a>
          <a class="blog-nav-item" href="#">Impacto</a>
          <a class="blog-nav-item" href="#">Guía</a>
          <a class="blog-nav-item" href="#">Acerca</a>
          <a class="blog-nav-item" href="#"><i class="fa fa-github-square"></i></a>                    
        </nav>
      </div>
    </div-->

    <div class="container-clima">
		<div class="row">
			<div id="responsiveTabsContainer">
	
			    <ul>
			        <li class="title-tab"><p class="text-size-14"> Cambio Climático </p></li>
			        <li class="normal-tab" id="main-tab"><a href="#tab-2"><strong>¿Qué es? </strong></a></li>
			        <li class="normal-tab"><a href="#tab-3"><strong>¿Por qué pasa?</strong> </a></li>
			        <li class="normal-tab"><a href="#tab-4"><strong>¿Cómo me afecta?</strong> </a></li>
			        <li class="normal-tab"><a href="#tab-5"><strong> Acciones</strong> </a></li>                
			    </ul>
			
			    <div id="tab-2">
				    
				    <div class="row">
					    <div class="col-xs-8">
						    <p class="black-text">
							    Los Científicos definen el cambio climático como "...todo cambio que ocurre en la cima a través del tiempo resultado de la variabilidad neutral o de las actividades humanas." El calentamiento global por su parte, es la manifestación más evidente del cambio climático y se refiere al incremento promedio de las temperaturas terrestres y marinas globales.
						    </p>
						    <br>
						    <p class="text-center"><strong>Inventario Nacional de la emisión de gases de efecto invernadero</strong></p>
						    <!--img class="img-responsive" src="img/g1.png"/-->
							<div id="chart1" style="width:350px;"></div>						    
						</div>    
					    <div class="col-xs-4" id="green-boxes">
							<div id="item1" class="side-box custom-tooltip" data-toggle="tooltip" data-placement="bottom" title="Title1">
								<div class="box-image">
									<div class="images-margin-side">
										<img id="item1-img" class="img-responsive" src="">
									</div>
								</div>
								<div class="box-text">
									<p class=" text-size-14"><span style="font-size:22px" id="item1-highlight"></span> <span id="item1-description"></span></p>
								</div>
							</div>								

							<div id="item2" class="side-box custom-tooltip" data-toggle="tooltip" data-placement="top" title="Title2">
								<div class="box-image">
									<div class="images-margin-side">
										<img id="item2-img" class="img-responsive" src="">
									</div>
								</div>
								<div class="box-text">
									<p class=" text-size-14"><span style="font-size:22px" id="item2-highlight"></span> <span id="item2-description"></span></p>
								</div>
							</div>								

							<div id="item3" class="side-box custom-tooltip" data-toggle="tooltip" data-placement="top" title="Title3">
								<div class="box-image">
									<div class="images-margin-side">
										<img id="item3-img" class="img-responsive" src="">
									</div>
								</div>
								<div class="box-text">
									<p class=" text-size-14"><span style="font-size:22px" id="item3-highlight"></span> <span id="item3-description"></span></p>
								</div>
							</div>																						
						</div>
				    </div>
				    <br>
				    <!-- Indicadores -->
				    <p style="font-size: 20px;">Indicadores</p>
				    <div class="row">
						<div class="text-center indicator-box-red col-xs-3 custom-tooltip" data-toggle="tooltip" data-placement="top" title="Lorem Ipsum Bacon Auditore">
							<h1>390%</h1>
							<p class="text-size-12">Más emisiones globales que en 1960.</p>
						</div>	
						<div class="text-center indicator-box-green col-xs-3 custom-tooltip" data-toggle="tooltip" data-placement="top" title="Lorem Ipsum Bacon Auditore">
							<h1>30%</h1>
							<p class="text-size-12"> Menos tala de árboles que en 1960</p>	
						</div>								
						<div class="text-center indicator-box-green col-xs-3 custom-tooltip" data-toggle="tooltip" data-placement="top" title="Lorem Ipsum Bacon Auditore">
							<h1></h1>
							<p class="text-size-12"></p>
						</div>	
						<div class="text-center indicator-box-red col-xs-3 custom-tooltip" data-toggle="tooltip" data-placement="top" title="Lorem Ipsum Bacon Auditore">
							<h1></h1>
							<p class="text-size-12"></p>
						</div>	
						<div class="text-center indicator-box-green col-xs-3 custom-tooltip" data-toggle="tooltip" data-placement="top" title="Lorem Ipsum Bacon Auditore">
							<h1></h1>
							<p class="text-size-12"></p>
						</div>							
					</div>    
				    
<div class="row">
					    <div class="data-table-container">
						    <h4 class="aqua-text"><strong>Datos</strong></h4>
						    <table class="bottom-table">
							    <tr>
								    <td style="width: 40%; padding-left:20px"><p class="text-size-12"><strong>Nombre</strong></p></td>
								    <td style="width: 15%"><p class="text-size-12"><strong>Dependencia</strong></p></td>
								    <td style="width: 15%"><p class="text-size-12"><strong>Fecha</strong></p></td>
								    <td style="width: 15%"><p class="text-size-12"><strong>Formato</strong></p></td>
								    <td style="width: 15%"><strong></strong></td>
							    </tr>
								<tr class="name-info">
								    <td style="padding-left:20px">
									    <p style="font-size: 10px; padding-right: 16px;"><strong>Rezago habitacional por condiciones de espacio, materiales e instalaciones de la vivienda</strong></p>
									</td>    
								    <td>
									    SEDATU
									</td>    
									<td>
									    N/A 
									</td>  
								    <td>
										<span class="format-text">CSV</span>
									</td>  
								    <td class="download-col">
									    <div class="center-block" style="border-radius:50%; background-color:#979494; width: 42px;">
											<h1 style="font-size: 20px; padding: 10px;" class="text-center"><i class="fa fa-download"></i><h1>
										</div>
									</td>
								</tr>
							    <tr>
								    <td style="width: 40%; padding-left:20px; padding-right: 5px;">
									    <br>
									    <p class="text-size-12"><strong>Descripción</strong></p>
									    <p style="font-size: 11px; padding-right: 24px; text-align: justify;">Una vivienda se encuentra en rezago habitacional cuando no cumple con las condiciones mínimas de espacio, materiales e instalaciones necesarias para garantizar el pleno desarrollo de sus habitantes y el numero de cuartos es mayor a 2.5. Una vivienda está en rezago habitacional por materiales cuando el piso es de tierra los muros son de material de desecho, la lámina de cartón, de lámina de asbesto o metálica, de carrizo, bambú o palma, de embarro o bajareque, o de madera o tejamanil. Una vivienda está en rezago habitacional por instalaciones de cocina cuando el principal combustible utilizado para cocinar es leña o carbón y no se cuenta con chimenea. Una vivienda está en rezago habitacional por instalaciones sanitarias cuando no cuenta con excusado, retrete, sanitario, letrina u hoyo negro, de uso excesivo (no se compare con otra vivienda) al que se le pueda echar agua mediante descarga directa o con cubetas</p>
									</td>
								    <td style="width: 15%">
									    <p class="text-size-12">
										    <strong>Desagregación</strong>
										</p>
										<p class="text-size-12">
											Nacional;Estatal
										</p>
									</td>
								    <td style="width: 15%">
									    <p class="text-size-12"><strong>Desagregación<br> Temporal</strong></p>
									    <p class="text-size-12">Anual</p>									    
								    </td>
								    <td style="width: 15%">
									    <p class="text-size-12"><strong>Años</strong></p>
									    <p class="text-size-12">2014.0</p>									    
									    <p class="aqua-text text-size-12">MÁS INFORMACIÓN</p>
									</td>
								    <td style="width: 15%"></td>
							    </tr>
						    </table>
					    </div>
				    </div>
				    				    
				</div>
			    
			    <div id="tab-3"> 
				    <p class="black-text">
					    El cambio climático que hoy enfrentamos está vinculado a la quema de combustibles fósiles, especialmente el carbón, gas y petróleo, y a la deforestación, es decir, a la pérdida de cobertura forestal. Ambos fenómenos tienen como consecuencia la excesiva emisión a la atmósfera de gases de efecto invernadero (GEI), mismos que están incrementando la temperatura del planeta
				    </p>
				    <p>
				    	Emisiones de carbono (Co2) por sector de la economía
					</p>    
					<div class="row">
						<div class="col-xs-12">
						    <!--img class="img-responsive" src="img/g2.png"/-->
							<div id="chart"></div>
						</div>	
					</div>	
					<p>Explora</p>
					<p>
						Selecciona un indicador: 
						<select id="opciones">
						  <option value="1">Opcion 1</option>
						  <option value="2">Opcion 2</option>
						  <option value="3">Opcion 3</option>						  						  
						</select>
					</p>					
					<!--div class="row">
						<div class="col-xs-12">
						    <img class="img-responsive" src="img/g3.png"/>							
						</div>	
					</div-->
					<div class="row">
						<div class="col-xs-12">
							<div id="map"></div>
						</div>
					</div>						
					<div class="row">
						<div class="col-xs-2" id="anio2010">
							<p class="text-center map-year"><strong>2010</strong></p>
						</div>	
						<div class="col-xs-2" id="anio2011">
							<p class="text-center map-year"><strong>2011</strong></p>
						</div>	
						<div class="col-xs-2" id="anio2012">
							<p class="text-center map-year"><strong>2012</strong></p>
						</div>	
						<div class="col-xs-2" id="anio2013">
							<p class="text-center map-year"><strong>2013</strong></p>
						</div>	
						<div class="col-xs-2" id="anio2014">
							<p class="text-center map-year"><strong>2014</strong></p>
						</div>	
						<div class="col-xs-2" id="anio2015">
							<p class="text-center map-year aqua-text"><strong>2015</strong></p>
						</div>																									
					</div>
				    <!-- Data table-->
				    <div class="row">
					    <div class="data-table-container">
						    <h4 class="aqua-text"><strong>Datos</strong></h4>
						    <table class="bottom-table">
							    <tr>
								    <td style="width: 40%; padding-left:20px"><p class="text-size-12"><strong>Nombre</strong></p></td>
								    <td style="width: 15%"><p class="text-size-12"><strong>Dependencia</strong></p></td>
								    <td style="width: 15%"><p class="text-size-12"><strong>Fecha</strong></p></td>
								    <td style="width: 15%"><p class="text-size-12"><strong>Formato</strong></p></td>
								    <td style="width: 15%"><strong></strong></td>
							    </tr>
								<tr class="name-info">
								    <td style="padding-left:20px;">
									    <p style="font-size: 10px; padding-right: 16px;"><strong>Rezago habitacional por condiciones de espacio, materiales e instalaciones de la vivienda</strong></p>
									</td>    
								    <td>
									    SEDATU
									</td>    
									<td>
									    N/A 
									</td>  
								    <td>
										<span class="format-text">CSV</span>
									</td>  
								    <td class="download-col">
										<div class="center-block" style="border-radius:50%; background-color:#979494; width: 42px;">
											<h1 style="font-size: 20px; padding: 10px;" class="text-center"><i class="fa fa-download"></i><h1>
										</div>
									</td>
								</tr>
							    <tr>
								    <td style="width: 40%; padding-left:20px; padding-right: 5px;">
									    <br>
									    <p class="text-size-12"><strong>Descripción</strong></p>
									    <p style="font-size: 11px; padding-right: 24px; text-align: justify;">Una vivienda se encuentra en rezago habitacional cuando no cumple con las condiciones mínimas de espacio, materiales e instalaciones necesarias para garantizar el pleno desarrollo de sus habitantes y el numero de cuartos es mayor a 2.5. Una vivienda está en rezago habitacional por materiales cuando el piso es de tierra los muros son de material de desecho, la lámina de cartón, de lámina de asbesto o metálica, de carrizo, bambú o palma, de embarro o bajareque, o de madera o tejamanil. Una vivienda está en rezago habitacional por instalaciones de cocina cuando el principal combustible utilizado para cocinar es leña o carbón y no se cuenta con chimenea. Una vivienda está en rezago habitacional por instalaciones sanitarias cuando no cuenta con excusado, retrete, sanitario, letrina u hoyo negro, de uso excesivo (no se compare con otra vivienda) al que se le pueda echar agua mediante descarga directa o con cubetas</p>
									</td>
								    <td style="width: 15%">
									    <p class="text-size-12">
										    <strong>Desagregación</strong>
										</p>
										<p class="text-size-12">
											Nacional;Estatal
										</p>
									</td>
								    <td style="width: 15%">
									    <p class="text-size-12"><strong>Desagregación<br> Temporal</strong></p>
									    <p class="text-size-12">Anual</p>									    
								    </td>
								    <td style="width: 15%">
									    <p class="text-size-12"><strong>Años</strong></p>
									    <p class="text-size-12">2014.0</p>									    
									    <p class="aqua-text text-size-12">MÁS INFORMACIÓN</p>
									</td>
								    <td style="width: 15%"></td>
							    </tr>
						    </table>
					    </div>
				    </div>

					
				</div>
			    
			    <div id="tab-4">
				    <p class="black-text">
					El cambio climático nos afecta a todos ya que su impacto potencial es enorme. Algunas predicciones son: la falta de agua potable, cambios en las condiciones de producción de alimentos. Además, un aumento en los índices de moralidad debido a inundaciones, tormentas, sequías y olas de calor. El cambio climático no es únicamente un fenómeno ambiental, sino también de profundas consecuencias económicas y sociales. Los países más pobres que no están preparados para enfrentar cambios rápidos, serán los que sufrirán las peores consecuencias.
				    </p> 
					<div class="row">
						
						<div class="col-xs-4">
							<div id="item1" class="side-box"><div class="box-image"><div class="images-margin-side"><img class="img-responsive" src="img/huella.png"></div></div><div class="box-text"><p class=" text-size-14"><span style="font-size:22px">2</span>Nuevas especies en peligro de extinción</p></div></div>
						</div>
						<div class="col-xs-4">
							<div id="item1" class="side-box"><div class="box-image"><div class="images-margin-side"><img class="img-responsive" src="img/flame.png"></div></div><div class="box-text"><p class=" text-size-14"><span style="font-size:22px">500</span> más incendios forestales al año</p></div></div>							
						</div>
						<div class="col-xs-4">
							<div id="item1" class="side-box"><div class="box-image"><div class="images-margin-side"><img class="img-responsive" src="img/flame.png"></div></div><div class="box-text"><p class=" text-size-14"><span style="font-size:22px"></span> Incremento de sequías en zonas rurales</p></div></div>							
						</div>													


					</div>
					<p style="font-size: 15px;">
						Explora
					</p>
					<p class="black-text">
						Los impactos ambientales se definen como la “modificación del ambiente ocasionada por la acción del hombre o de la naturaleza”. A continuación se muestran diversos impactos ambientales comunmente relacionados con el cambio climático. Aunque no necesariamente dependen de las actividades mostradas en la sección anterior.
					</p>
					<br>
					<div class="select-container">
						<p class="text-center"style="font-size: 15px; float:left;">
							Selecciona un indicador 
						</p>		
						<select class="center-block indicator_select">
							<option value="select">opción 1</option>
							<option value="azulejos">opción 2</option>
							<option value="azulejos">opción 3</option>
						</select>
					</div>	
					<img class="map" src="img/map.png">
					<div class="row">
						<div class="col-xs-2" id="anio2010">
							<p class="text-center map-year"><strong>2010</strong></p>
						</div>	
						<div class="col-xs-2" id="anio2011">
							<p class="text-center map-year"><strong>2011</strong></p>
						</div>	
						<div class="col-xs-2" id="anio2012">
							<p class="text-center map-year"><strong>2012</strong></p>
						</div>	
						<div class="col-xs-2" id="anio2013">
							<p class="text-center map-year"><strong>2013</strong></p>
						</div>	
						<div class="col-xs-2" id="anio2014">
							<p class="text-center map-year"><strong>2014</strong></p>
						</div>	
						<div class="col-xs-2" id="anio2015">
							<p class="text-center map-year aqua-text"><strong>2015</strong></p>
						</div>																									
					</div>
					
					<div class="row">
					    <div class="data-table-container">
						    <h4 class="aqua-text"><strong>Datos</strong></h4>
						    <table class="bottom-table">
							    <tr>
								    <td style="width: 40%; padding-left:20px"><p class="text-size-12"><strong>Nombre</strong></p></td>
								    <td style="width: 15%"><p class="text-size-12"><strong>Dependencia</strong></p></td>
								    <td style="width: 15%"><p class="text-size-12"><strong>Fecha</strong></p></td>
								    <td style="width: 15%"><p class="text-size-12"><strong>Formato</strong></p></td>
								    <td style="width: 15%"><strong></strong></td>
							    </tr>
								<tr class="name-info">
								    <td style="padding-left:20px;">
									    <p style="font-size: 10px; padding-right: 16px;"><strong>Rezago habitacional por condiciones de espacio, materiales e instalaciones de la vivienda</strong></p>
									</td>    
								    <td>
									    SEDATU
									</td>    
									<td>
									    N/A 
									</td>  
								    <td>
										<span class="format-text">CSV</span>
									</td>  
								    <td class="download-col">
										<div class="center-block" style="border-radius:50%; background-color:#979494; width: 42px;">
											<h1 style="font-size: 20px; padding: 10px;" class="text-center"><i class="fa fa-download"></i><h1>
										</div>
									</td>
								</tr>
							    <tr>
								    <td style="width: 40%; padding-left:20px; padding-right: 5px;">
									    <br>
									    <p class="text-size-12"><strong>Descripción</strong></p>
									    <p style="font-size: 11px; padding-right: 24px; text-align: justify;">Una vivienda se encuentra en rezago habitacional cuando no cumple con las condiciones mínimas de espacio, materiales e instalaciones necesarias para garantizar el pleno desarrollo de sus habitantes y el numero de cuartos es mayor a 2.5. Una vivienda está en rezago habitacional por materiales cuando el piso es de tierra los muros son de material de desecho, la lámina de cartón, de lámina de asbesto o metálica, de carrizo, bambú o palma, de embarro o bajareque, o de madera o tejamanil. Una vivienda está en rezago habitacional por instalaciones de cocina cuando el principal combustible utilizado para cocinar es leña o carbón y no se cuenta con chimenea. Una vivienda está en rezago habitacional por instalaciones sanitarias cuando no cuenta con excusado, retrete, sanitario, letrina u hoyo negro, de uso excesivo (no se compare con otra vivienda) al que se le pueda echar agua mediante descarga directa o con cubetas</p>
									</td>
								    <td style="width: 15%">
									    <p class="text-size-12">
										    <strong>Desagregación</strong>
										</p>
										<p class="text-size-12">
											Nacional;Estatal
										</p>
									</td>
								    <td style="width: 15%">
									    <p class="text-size-12"><strong>Desagregación<br> Temporal</strong></p>
									    <p class="text-size-12">Anual</p>									    
								    </td>
								    <td style="width: 15%">
									    <p class="text-size-12"><strong>Años</strong></p>
									    <p class="text-size-12">2014.0</p>									    
									    <p class="aqua-text text-size-12">MÁS INFORMACIÓN</p>
									</td>
								    <td style="width: 15%"></td>
							    </tr>
						    </table>
					    </div>
				    </div>
			
				</div>
			    
			    <div id="tab-5"> 
					Acciones
				</div>    

			</div>
		</div>	
    </div><!-- /.container -->

    <!-- Bootstrap core JavaScript
    ================================================== -->
    <!-- Placed at the end of the document so the pages load faster -->
    <!--script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.3/jquery.min.js"></script-->
    
    <script src="js/jquery-1.11.0.min.js"></script>    
    <script src="js/bootstrap.js"></script>
    <script src="http://d3js.org/d3.v3.min.js" charset="utf-8"></script>    
    <script src="js/c3.js"></script>
	<script type="text/javascript" src="js/scatter001.js"></script>						    							
    <script src="js/csvjson.js"></script>    

	<!-- Responsive Tabs JS -->
	<script src="js/jquery.responsiveTabs.js" type="text/javascript"></script>

	<!-- Leaflet -->
	<script src="http://cdn.leafletjs.com/leaflet/v0.7.7/leaflet.js"></script>
	<!--script src="js/states_temp_2by2.js" type="text/javascript"></script-->
	
	<script type="text/javascript">

		var estados;
		var anio = 25;
		var op = 1;


		$('#anio2010').click(function() {
			anio = 20;
			if($('#opciones').val() == 1) {
				pintarMapa();		
			} else if($('#opciones').val() == 2) {
				pintarMapa2();
			}
		});

		$('#anio2011').click(function() {
			anio = 21;
			if($('#opciones').val() == 1) {
				pintarMapa();		
			} else if($('#opciones').val() == 2) {
				pintarMapa2();
			}
		});

		$('#anio2012').click(function() {
			anio = 22;
			if($('#opciones').val() == 1) {
				pintarMapa();		
			} else if($('#opciones').val() == 2) {
				pintarMapa2();
			}
		});

		$('#anio2013').click(function() {
			anio = 23;
			if($('#opciones').val() == 1) {
				pintarMapa();		
			} else if($('#opciones').val() == 2) {
				pintarMapa2();
			}
		});

		$('#anio2014').click(function() {
			anio = 24;
			if($('#opciones').val() == 1) {
				pintarMapa();		
			} else if($('#opciones').val() == 2) {
				pintarMapa2();
			}
		});

		$('#anio2015').click(function() {
			anio = 25;
			if($('#opciones').val() == 1) {
				pintarMapa();		
			} else if($('#opciones').val() == 2) {
				pintarMapa2();
			}
		});

		$('#opciones').change(function() {

			if($(this).val() == 1) {
				pintarMapa();
			} else if($(this).val() == 2) {
				pintarMapa2();
			}

		});



		function pintarMapa() {
			function style1(feature) {
				return {
					weight: 2,
					opacity: 1,
					color: 'white',
					dashArray: '3',
					fillOpacity: 0.7,
					fillColor: getColor(feature.properties.indicador1[anio].valor)
				};
			}
			
			info.removeFrom(map);

			info.onAdd = function (map) {
				this._div = L.DomUtil.create('div', 'info');
				this.update();
				return this._div;
			}

			info.update = function (props) {
				this._div.innerHTML = (props ? '<h4>' + props.name + '</h4> <br>' 
					+ 'Población: ' + props.indicador1[anio].valor + '<br>' 
					+ 'PIB Anual: ' + props.indicador1[anio].valor + '<br>'
					+ 'Territorio: ' + props.indicador1[anio].valor + '<br><br><br>'
					+ '<b>Top estados generadores</b><br>' 
					+ '<table class="table table-striped table-condensed"><tr><td><b>Estado</b></td><td><b>CO2</b></td><td><b>PIB</b></td></tr>'
					+ '<tr><td>Morelia</td><td>100</td><td>250</td></tr>' 
					+ '<tr><td>D.F.</td><td>95</td><td>130</td></tr>' 
					+ '<tr><td>Nuevo León</td><td>85</td><td>130</td></tr>' 
					+ '<tr><td>Edo. Mexico</td><td>100</td><td>130</td></tr>' 
					+ '<tr><td>Tabasco</td><td>100</td><td>130</td></tr></table>' : '');
			};

			info.addTo(map);

			map.removeLayer(geojson);

			geojson = L.geoJson(estados, {
				style: style1,
				onEachFeature: onEachFeature
			}).addTo(map);
		}


		function pintarMapa2() {
			function style2(feature) {
					return {
						weight: 2,
						opacity: 1,
						color: 'white',
						dashArray: '3',
						fillOpacity: 0.7,
						fillColor: getColor(feature.properties.indicador2[anio].valor)
					};
				}

				info.removeFrom(map);

				info.onAdd = function (map) {
					this._div = L.DomUtil.create('div', 'info');
					this.update();
					return this._div;
				}

				info.update = function (props) {
					this._div.innerHTML = (props ? '<h4>' + props.name + '</h4> <br>' 
						+ 'Población: ' + props.indicador2[anio].valor + '<br>' 
						+ 'PIB Anual: ' + props.indicador2[anio].valor + '<br>'
						+ 'Territorio: ' + props.indicador2[anio].valor + '<br><br><br>'
						+ '<b>Top estados generadores</b><br>' 
						+ '<table class="table table-striped table-condensed"><tr><td><b>Estado</b></td><td><b>CO2</b></td><td><b>PIB</b></td></tr>'
						+ '<tr><td>Morelia</td><td>100</td><td>250</td></tr>' 
						+ '<tr><td>D.F.</td><td>95</td><td>130</td></tr>' 
						+ '<tr><td>Nuevo León</td><td>85</td><td>130</td></tr>' 
						+ '<tr><td>Edo. Mexico</td><td>100</td><td>130</td></tr>' 
						+ '<tr><td>Tabasco</td><td>100</td><td>130</td></tr></table>' : '');
				};

				info.addTo(map);

				map.removeLayer(geojson);

				geojson = L.geoJson(estados, {
					style: style2,
					onEachFeature: onEachFeature
				}).addTo(map);
		}



		$.ajax({
			//url: "data/states_temp.json",
			url: "data/states_temp_2by2.json",
			async: false,
			success: function(data){
				console.log(data);
				estados = data;
			},
			error: function(err) {
				console.log(err.responseText);
				estados = err.responseText;
			}
		});

		var map = L.map('map', {zoomControl: false}).setView([22.890674, -102.067944], 5);

		// Disable drag and zoom handlers.
		map.dragging.disable();
		map.touchZoom.disable();
		map.doubleClickZoom.disable();
		map.scrollWheelZoom.disable();

		// Disable tap handler, if present.
		if (map.tap) map.tap.disable();

		L.tileLayer('https://api.tiles.mapbox.com/v4/{id}/{z}/{x}/{y}.png?access_token=pk.eyJ1IjoibWFwYm94IiwiYSI6IjZjNmRjNzk3ZmE2MTcwOTEwMGY0MzU3YjUzOWFmNWZhIn0.Y8bhBaUMqFiPrDRW9hieoQ', {
			maxZoom: 18,
			id: 'mapbox.light'
		}).addTo(map);

		var info = L.control();

		info.onAdd = function (map) {
			this._div = L.DomUtil.create('div', 'info');
			this.update();
			return this._div;
		};

		info.update = function (props) {
			this._div.innerHTML = (props ? '<h4>' + props.name + '</h4> <br>' 
				+ 'Población: ' + props.indicador1[anio].valor + '<br>' 
				+ 'PIB Anual: ' + props.indicador1[anio].valor + '<br>'
				+ 'Territorio: ' + props.indicador1[anio].valor + '<br><br><br>'
				+ '<b>Top estados generadores</b><br>' 
				+ '<table class="table table-striped table-condensed"><tr><td><b>Estado</b></td><td><b>CO2</b></td><td><b>PIB</b></td></tr>'
				+ '<tr><td>Morelia</td><td>100</td><td>250</td></tr>' 
				+ '<tr><td>D.F.</td><td>95</td><td>130</td></tr>' 
				+ '<tr><td>Nuevo León</td><td>85</td><td>130</td></tr>' 
				+ '<tr><td>Edo. Mexico</td><td>100</td><td>130</td></tr>' 
				+ '<tr><td>Tabasco</td><td>100</td><td>130</td></tr></table>' : '');
		};

		info.addTo(map);

		function getColor(d) {
			return d > 4000000 ? '#009975' :
			       d > 3500000 ? '#00b388' :
			       d > 3000000 ? '#00cc9c' :
			       d > 2500000 ? '#00ffc3' :
			       d > 2000000 ? '#33ffcf' :
			       d > 1500000 ? '#66ffdb' :
			       d > 1000000 ? '#99ffe7' :
			                     '#ccfff3';
		}

		function style(feature) {
			return {
				weight: 2,
				opacity: 1,
				color: 'white',
				dashArray: '3',
				fillOpacity: 0.7,
				fillColor: getColor(feature.properties.indicador1[anio].valor)
			};
		}

		function highlightFeature(e) {
			var layer = e.target;

			layer.setStyle({
				weight: 5,
				color: '#666',
				dashArray: '',
				fillOpacity: 0.7
			});

			if (!L.Browser.ie && !L.Browser.opera) {
				layer.bringToFront();
			}

			info.update(layer.feature.properties);
		}

		var geojson;

		function resetHighlight(e) {
			geojson.resetStyle(e.target);
			info.update();
		}

		function zoomToFeature(e) {
			map.fitBounds(e.target.getBounds());
		}

		function onEachFeature(feature, layer) {
			layer.on({
				mouseover: highlightFeature,
				mouseout: resetHighlight
			});
		}

		geojson = L.geoJson(estados, {
			style: style,
			onEachFeature: onEachFeature
		}).addTo(map);



		var legend = L.control({position: 'bottomleft'});

		legend.onAdd = function (map) {

			var div = L.DomUtil.create('div', 'info legend'),
				grades = [0, 1000000, 1500000, 2000000, 2500000, 3500000, 4000000, 4500000],
				labels = [],
				from, to;

			for (var i = 0; i < grades.length; i++) {
				from = grades[i];
				to = grades[i + 1];

				labels.push(
					'<i style="background:' + getColor(from + 1) + '"></i> ' +
					from + (to ? '&ndash;' + to : '+'));
			}

			div.innerHTML = labels.join('<br>');
			return div;
		};

		legend.addTo(map);


		
		













		$('#responsiveTabsContainer').responsiveTabs({
		    startCollapsed: 'accordion',
		    active: 1
		});
		$("#main-tab").click();
		
		$.ajax("http://trebolbit.mx/cambio_climatico/data/page1Structure.json", {
		    success: function(data){
			    //alert(JSON.stringify(data));
			    var item1 = data.item1;
			    var item2 = data.item2;
			    var item3 = data.item3;			    			    
					
				$("#item1-img").attr("src", item1.imageUrl);
				$("#item1-highlight").text(item1.highlight);
				$("#item1-description").text(item1.description);
				$("#item1").attr('title', item1.tooltipDescription).tooltip('fixTitle');
				
				$("#item2-img").attr("src", item2.imageUrl);
				$("#item2-highlight").text(item2.highlight);
				$("#item2-description").text(item2.description);
				$("#item2").attr('title', item2.tooltipDescription).tooltip('fixTitle');				
				
				$("#item3-img").attr("data-original-title", item3.tooltipDescription);					
				$("#item3-img").attr("src", item3.imageUrl);
				$("#item3-highlight").text(item3.highlight);
				$("#item3-description").text(item3.description);										
				$("#item3").attr('title', item3.tooltipDescription).tooltip('fixTitle');					
					
		    },
		    error: function(err){
			    alert(JSON.stringify(err));
		    }		    
		});


		$(function () {
			$('[data-toggle="tooltip"]').tooltip({"title":"pepe"})
		});
		
		$.ajax("http://trebolbit.mx/cambio_climatico/data/data.csv", {
		    success: function(data) {

		        var jsonobject = csvjson.csv2json(data);
		        		        

		        var totalrows = jsonobject.rows.length;
				
				var sector = [];

				sector[0]= {
					name:jsonobject.rows[0].a_Categoria_IPCC,
				};

				if(jsonobject.rows[0].a_2012 > 0){
					sector[0].total += jsonobject.rows[0].a_2012;
				}else{
					sector[0].total = 0;
				};

				if(jsonobject.rows[0].a_2012 < 0){
					
					sector[0].total_2 += (jsonobject.rows[0].a_2012)*(-1);
				}else{
					sector[0].total_2 = 0;
				}				
				

		        var sectorIndex = 0					

		        for(i=0; i<totalrows; i++){
					
					var actualSector = jsonobject.rows[i].a_Categoria_IPCC;
					
					if(jsonobject.rows[i].a_2012 > 0){
						sector[sectorIndex].total += jsonobject.rows[i].a_2012;						
					}
					if(jsonobject.rows[i].a_2012 < 0){
						sector[sectorIndex].total_2 += (jsonobject.rows[i].a_2012)*(-1);
					}					
					
			        if(sector[sectorIndex].name != jsonobject.rows[i].a_Categoria_IPCC){
				        	
				        sectorIndex += 1;
						sector[sectorIndex] = {
							name:jsonobject.rows[i].a_Categoria_IPCC,
							total:jsonobject.rows[i].a_2012							
						};
						
						if(jsonobject.rows[i].a_2012 > 0){
							sector[sectorIndex].total = jsonobject.rows[i].a_2012;						
						}else{
							sector[sectorIndex].total = 0;
						};
						
						if(jsonobject.rows[i].a_2012 < 0){
							sector[sectorIndex].total_2 = (jsonobject.rows[i].a_2012)*(-1);
						}else{
							sector[sectorIndex].total_2 = 0;
						};						
						

			        }
		        }
		        //alert(JSON.stringify(sector));
		        
		        
			    var columns_adapted = [];
			    var groups_adapted = [];
			    groups_adapted[0] = [];			    
			    for(j=0; j<sector.length; j++){
				    columns_adapted[j]=[sector[j].name, sector[j].total,sector[j].total_2, sector[j].total - sector[j].total_2];
				    groups_adapted[0].push(sector[j].name);				    
			    };		        

				//alert(JSON.stringify(groups_adapted));		
				
				
				var chart1 = c3.generate({
					"bindto": "#chart1",			
				    data: {
				        columns: columns_adapted,
				        type: 'bar',
				        groups: groups_adapted
				    },
				    colors: {
			            "Agricultura": '#ff0000',
			            "Desechos": '#ff0000',
			            "Energía": '#ff0000'
			        }
				});				
					    

		    },
		    error: function() {
				alert("Error loading the chart data.");
		    }
		});	    		
			
	</script>  
  </body>	
</html>
